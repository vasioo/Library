@using Library.Models.ViewModels;
@model BookPageViewModel

@{
    var imageUrl = "";
    var book = Model.Book;
    if (book != null)
    {
        imageUrl = $"https://res.cloudinary.com/dzaicqbce/image/upload/v1695818842/image-for-book-{Model.Book.Id}.png";
    }
    System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("bg-BG");
    var month = book.DateOfBookCreation.Month;

    string abbreviation;
    switch (month)
    {
        case 1:
            abbreviation = "яну.";
            break;
        case 2:
            abbreviation = "фев.";
            break;
        case 3:
            abbreviation = "март";
            break;
        case 4:
            abbreviation = "апр.";
            break;
        case 5:
            abbreviation = "май";
            break;
        case 6:
            abbreviation = "юни";
            break;
        case 7:
            abbreviation = "юли";
            break;
        case 8:
            abbreviation = "авг.";
            break;
        case 9:
            abbreviation = "септ.";
            break;
        case 10:
            abbreviation = "окт.";
            break;
        case 11:
            abbreviation = "ное.";
            break;
        case 12:
            abbreviation = "дек.";
            break;
        default:
            abbreviation = "";
            break;
    }
}
<style>
    .left-table-prop, .right-table-prop {
        font-size: 1.25rem;
    }

    .left-table-prop {
        font-weight: 700
    }

    .btns-for-borrowing a {
        font-size: 1.35rem !important;
    }

    .description-header {
        border-top: 0.3em solid aliceblue;
        border-bottom: 0.3em solid aliceblue;
        font-size: 2em;
        font-weight: 700;
    }

    .description-content {
        font-size: 1.25em;
    }

    .rate {
        float: left;
        clear: both;
        height: 46px;
        padding: 0 10px;
    }

        .rate:not(:checked) > input {
            position: absolute;
            top: -9999px;
        }

        .rate:not(:checked) > label {
            float: right;
            width: 1em;
            overflow: hidden;
            white-space: nowrap;
            cursor: pointer;
            font-size: 30px;
            color: #ccc;
        }

            .rate:not(:checked) > label:before {
                content: '★ ';
            }

        .rate > input:checked ~ label {
            color: #ffc700;
        }

        .rate:not(:checked) > label:hover,
        .rate:not(:checked) > label:hover ~ label {
            color: #deb217;
        }

        .rate > input:checked + label:hover,
        .rate > input:checked + label:hover ~ label,
        .rate > input:checked ~ label:hover,
        .rate > input:checked ~ label:hover ~ label,
        .rate > label:hover ~ input:checked ~ label {
            color: #c59b08;
        }

</style>
<div class="book-page ">
    <div class="container">
        <div class="row  pt-5 mt-5 mt-lg-0 justify-content-around">
            <div class="col-11 col-lg-5">
                <div class="row">
                    <img src="@imageUrl" />
                </div>
                <hr />
                <div class="row">
                    <div class="col-6 left-table-prop">Име на книгата:</div>
                    <div class="col-6 right-table-prop">@book.Title</div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-6 left-table-prop">Автор:</div>
                    <div class="col-6 right-table-prop">@book.Author</div>
                </div>
                <hr />
                <div class="row">
                    <div class="col align-self-center">
                        <div class="left-table-prop ">
                            Оценете Книгата:
                        </div>
                    </div>
                    <div class="col">
                        <div class="rate p-0 m-0" data-book-id="@Model.Book.Id">
                            <input type="radio" id="star5" name="rate" value="5" />
                            <label for="star5" title="text">5 stars</label>
                            <input type="radio" id="star4" name="rate" value="4" />
                            <label for="star4" title="text">4 stars</label>
                            <input type="radio" id="star3" name="rate" value="3" />
                            <label for="star3" title="text">3 stars</label>
                            <input type="radio" id="star2" name="rate" value="2" />
                            <label for="star2" title="text">2 stars</label>
                            <input type="radio" id="star1" name="rate" value="1" />
                            <label for="star1" title="text">1 star</label>
                        </div>
                    </div>
                </div>

                <hr />
                <div class="row">
                    <div class="col-6 left-table-prop">Дата на създаване:</div>
                    <div class="col-6 right-table-prop">@book.DateOfBookCreation.ToString("dd") @abbreviation @book.DateOfBookCreation.ToString("yyyy") г.</div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-6 left-table-prop">Жанр</div>
                    <div class="col-6 right-table-prop">@book.Genre.CategoryName</div>
                </div>
                <hr />
            </div>
            <div class="col-11 col-lg-6">
                <div class="row btns-for-borrowing">
                    @if (User!.Identity!.IsAuthenticated)
                    {
                        @if (!Model.HasUserBorrowedIt)
                        {
                            <a class="btn btn-success borrow-book-btn" id="@book.Id">Заяви книгата</a>
                        }
                        else
                        {
                            if (!Model.IsDisabled)
                            {
                                @if (Model.Book.ISBN != null)
                                {

                                    if (Model.Book.ISBN != "")
                                    {
                                        if (Model.IsWaiting)
                                        {
                                            <div class="d-flex">
                                                <a  class="btn btn-warning col fs-5 disabled" >Изчакайте потвърждение</a>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="d-flex">
                                                <a id="@Model.Book.Id" class="btn btn-danger read-book-btn col fs-5" data-id="@Model.Book.ISBN">Чети книгата</a>
                                            </div>
                                        }
                                    }
                                }
                            }
                            else
                            {
                                <a class="btn btn-secondary disabled" disabled>Вашият период на четене изтече</a>
                            }
                        }
                    }
                    else
                    {
                        <a class="btn btn-success unauth-borrow-book-btn" id="@book.Id">Заяви книгата</a>
                    }
                </div>
                <div class="row pt-3">
                    <div class="d-flex p-2  justify-content-center align-items-center description-header">
                        Описание на книгата
                    </div>
                    <div class="d-flex p-3 description-content">
                        @book.Description
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>